@import "tailwindcss";
@plugin "@tailwindcss/typography";

/* This entire block is for themeing the site */

@theme {
    /* Background: Deep Slate Charcoal */
    --color-bg-main: #1a1c1e;

    /* Surface: Dusty Slate */
    --color-bg-surface: #26292c;

    /* Muted: The Deep "Erase" Shadow */
    --color-bg-muted: #121415;

    /* Brand: Chalky Crimson (Pastel Red / Nord 11) */
    --color-brand: #bf616a;

    /* Brand Light: Chalky Peach (Nord 12) */
    --color-brand-light: #d08770;

    /* Brand Dark: Dusty Lavender (Nord 15) */
    --color-brand-dark: #b48ead;

    /* Text: Fresh Chalk White (Maximum Legibility) */
    --color-text-main: #e5e9f0;

    /* Text Muted: Chalk Dust Grey */
    --color-text-muted: #717d8c;

    --font-mono: "Fira Code";

	--font-victor: "Victor Mono", var(--font-mono);
}

/* I am working with a custom theme, this just sets the background to the theme background*/
body {
	background-color: var(--color-bg-main);
	font-size: var(--text-base);
}

@utility prose-catppuccin {
	@apply prose prose-invert max-w-none;
	@apply prose-headings:text-brand prose-headings:font-bold;
	@apply prose-p:text-text-main prose-p:leading-relaxed;

	/* For hyperlinks, base default look */
	@apply prose-a:text-brand-light prose-a:underline prose-a:decoration-auto;
	/* Smooth transition for color swaps */
	@apply prose-a:transition-colors prose-a:duration-200 prose-a:ease-in-out;
	/* Slight padding with negative margin for a better-looking highlight box (suggested by Souvik) */
	@apply prose-a:rounded-sm prose-a:-mx-0.5 prose-a:px-0.5;

	/* For rendering code */
	:where(code):not(:where(pre code)) {
		@apply text-brand-light bg-bg-surface px-1 rounded;
		/*
			To ensure that the backticks which wrap the content don't bother us by showing up, because otherwise those backticks are also displayed in inline code
		*/
		@apply before:content-none after:content-none;
	}

	/* CODE BLOCKS:- We style the <pre> container, not the code text inside */
	@apply prose-pre:bg-bg-surface prose-pre:border prose-pre:border-text-muted prose-pre:text-base;
	
	/* Ensure the copy button fits nicely */
	@apply prose-pre:relative;

	/* Just for bold, yes */
	@apply prose-strong:text-brand-light;

	@apply prose-table:w-full prose-table:border-collapse prose-table:border prose-table:border-text-muted;
	@apply prose-th:border prose-th:border-text-muted prose-th:bg-bg-surface/50 prose-th:p-2;
	@apply prose-td:border prose-td:border-text-muted prose-td:p-2;

	/* Table Styling: Alternating Rows */
	@apply prose-tr:even:bg-bg-muted;

	/* Overriding the default 'text-align: left' imposed by prose by explicitly respecting the align attribute generated by Markdown. */
	td[align="center"] {
		text-align: center;
	}
	td[align="right"] {
		text-align: right;
	}

	/* Table headings being centered is always sexy */
	th {
		text-align: center !important;
	}

}

.prose-catppuccin a:hover {
	/* Background becomes the bright brand color */
	background-color: var(--color-brand-light);
	/* Text becomes dark for readability against the bright background */
	color: var(--color-bg-main);
	/* Remove the underline on hover for a nice look */
	text-decoration: none;
}

code, pre {
	font-variant-ligatures: normal;
}

/* --- LaTeX in Markdown --- */
/* This one is only for helping mobile users read long asf LaTeX stuff */
.katex-display {
	overflow-x: auto;
	overflow-y: hidden;
	padding-top: 0.5rem;
	padding-bottom: 0.5rem;
}

/* Fixing for callout */
/* So basically when we open a collapsible callout, the scrollbar may just randomly be like: OMAI WA BING CHILLING LET'S SPAWNNNN (might not have needed a scrollbar on the page previously)
	and may cause it to kinda look like jittering, i.e. "looks" like the content moves a bit when we open the details thingy */
html {
	scrollbar-gutter: stable;
	scroll-behavior: smooth; /* added for markdown stuff, because well, when we click a different section, they shouldn't jump y'know */
}

/* Some sexy stuff for markdown sidebar */
/* So basically, we define pulse-glow because, well..., it looks cool when stuff flashes slowwwwly <3, only used for active-link on sidebar
	Apart from that, we define its behaviour on hover because obviously
	And lastly, we need some of that beauty when we work with active-link */
@keyframes pulse-glow {
	0%, 100% { 
		text-shadow: 0 0 4px rgba(208, 135, 112, 0); 
	}
	50% { 
		text-shadow: 0 0 12px rgba(208, 135, 112, 0.6); 
		color: var(--color-brand-light);
	}
}

.hover-pulse:hover {
	animation: pulse-glow 2s infinite ease-in-out;
	transform: translateX(4px);
	transition: all 0.3s ease;

	/* Force the background to stay clear and text to stay peach */
	background-color: transparent !important;
	color: var(--color-brand-light) !important;
	text-decoration: none !important;
}

.active-link {
    animation: pulse-glow 2s infinite ease-in-out;
    color: var(--color-brand-light) !important;
	font-weight: bold;
    transform: translateX(6px); /* Stay slightly shifted while active */
    transition: all 0.3s ease;
}
